version: '2'
services:
    tomcat_data:
        build:
            context: .
            dockerfile: application.Dockerfile
        restart: always
    tomcat:
        build:
            context: .
            dockerfile: tomcat.Dockerfile
        volumes_from: [ "tomcat_data" ]
        depends_on: [ "tomcat_data" ]
        restart: always
    nginx:
        build:
            context: .
            dockerfile: web.Dockerfile
        depends_on: [ "tomcat" ]
        external_links: [ "tomcat:tomcat" ]
        ports: [ "80:80" ]
        restart: always
